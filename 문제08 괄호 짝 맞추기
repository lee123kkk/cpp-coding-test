/*
소괄호는 짝을 맞춘 괄호 '('와 닫힌 괄호 ')'로 구성합니다.
문제에서는 열린 괄호나 닫힌 괄호가 마구 뒤섞인 문자열 s를 줍니다.
이때 소괄호가 정상적으로 열고 닫혔는지 판별하는 solution() 함수를 구현하세요.
만약 소괄호가 장성적으로 열고 닫혔다면 true를 그렇지 않다면 false를 반환하면 됩니다.

제약조건
열린 괄호는 자신과 가장 가까운 닫힌 괄호를 만나면 상쇄됩니다.
모든 괄호가 상쇄되어 더 이상 아무 괄호도 없어야만 정상으로 열고 닫혔다고 할 수 있습니다.
더 상쇄할 괄호가 없을 때까지 상쇄를 반복합니다.
*/

//===================================================================================================================

#include <stack>
using namespace std;

// 'solution' 함수는 문자열 's'가 올바른 괄호 구조를 가지고 있는지 확인합니다.
// '(' 괄호가 나오면 스택에 푸시하고, ')' 괄호가 나오면 스택에서 팝합니다.
// 모든 문자를 확인한 후 스택이 비어있다면 괄호가 올바르게 닫힌 것입니다.
bool solution(string s) {
    stack<char> stack;

    for (char c : s) {
       //❶ '(' 괄호를 스택에 푸시합니다.
        if (c == '(') { 
            stack.push(c);
        } 
       else if (c == ')') {
       // ❷  ')' 괄호가 나오면 스택이 비어있는지 확인            
            if (stack.empty()) {
              //❸  스택이 비어있다면 괄호 짝이 맞지 않으므로 false반환
                return false;
            } else {
               //❹ 비어있지 않다면 팝 연산(짝을 찾으므로 여는괄호 스택에서 제거)
                stack.pop();
            }
        }
    }

    //❺ 스택이 비어있다면 괄호가 올바르게 닫힌 것이므로 true 반환, 아니라면 false 반환
     return stack.empty();
}
